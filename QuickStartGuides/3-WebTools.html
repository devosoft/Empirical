<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Web Tools &mdash; Empirical 0.0.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=933cd161"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script defer="defer" src="https://unpkg.com/@popperjs/core@2"></script>
        <script defer="defer" src="https://unpkg.com/tippy.js@6"></script>
        <script defer="defer" src="../_static/tippy/QuickStartGuides/3-WebTools.ac2135fe-6d1b-424f-8fcd-6a8766d7030d.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using the Project Template" href="4-UsingProjectTemplate.html" />
    <link rel="prev" title="Base Tools" href="2-BaseTools.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Empirical
          </a>
              <div class="version">
                0.0.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../BuiltWithEmpiricalGallery/index.html">Built With Empirical Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Quick Start Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="0-Overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="1-HelloWorld.html">Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-BaseTools.html">Base Tools</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Web Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a-simple-example">A Simple Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controlling-a-web-page-the-basics">Controlling a Web Page: The Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#live-variables-and-function">“Live” Variables and Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#finding-and-modifying-existing-widgets">Finding and Modifying Existing Widgets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controlling-css">Controlling CSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#empirical-tables">Empirical Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#canvas">Canvas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4-UsingProjectTemplate.html">Using the Project Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="todos/todo.html">Work In Progress</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Empirical</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../library/base/base.html">General Purpose Debugging Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/bits/bits.html">Bits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/compiler/compiler.html">Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/config/config.html">Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/control/control.html">Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/data/data.html">Data Collection and Recording Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/datastructs/datastructs.html">Data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/debug/debug.html">Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/evolve/evolve.html">Evolution tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/functional/functional.html">Functional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/games/games.html">Games</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/geometry/geometry.html">Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/hardware/hardware.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/in_progress/in_progress.html">In_progress</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/io/io.html">IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/matching/matching.html">Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/math/math.html">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/meta/meta.html">Meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/polyfill/polyfill.html">Polyfill</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/prefab/prefab.html">Prefab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/scholar/scholar.html">Scholar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/testing/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/text/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/tools/tools.html">Other Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/web/web.html">Web Tools (for use with Emscripten)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bibliography</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to Empirical</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/empirical-development-practices.html">Empirical Development Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/getting-started.html">Getting started with Empirical development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/contribution-guidelines-and-review.html">Coding guidelines and review checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/adding-documentation.html">Empirical Documentation Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/guide-to-testing.html">Guide to Testing in Empirical</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Empirical</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Quick Start Guides</a></li>
      <li class="breadcrumb-item active">Web Tools</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="web-tools">
<h1>Web Tools<a class="headerlink" href="#web-tools" title="Link to this heading"></a></h1>
<p>The web tools in Empirical are structured to allow the developer to
fully control components of a web page from C++. Note that you must have
the emscripten compiler installed for web utilities to function
properly.</p>
<p>Empirical web Widgets include Text, Buttons, Images, Tables, or many
other HTML components. All widgets are derived from <code class="docutils literal notranslate"><span class="pre">emp::Widget</span></code> and
structured such that multiple widgets can properly refer to and modify
the same component.</p>
<section id="a-simple-example">
<h2>A Simple Example<a class="headerlink" href="#a-simple-example" title="Link to this heading"></a></h2>
<p>In order to get a simple example working, you need:</p>
<ul class="simple">
<li><p>an HTML file (the default version is effective in most cases),</p></li>
<li><p>the C++ code file to actually control the web page, and</p></li>
<li><p>the necessary flags to compile (again, the default version should
work).</p></li>
</ul>
<p>The required files are all in <code class="docutils literal notranslate"><span class="pre">examples/web/</span></code> called <code class="docutils literal notranslate"><span class="pre">Example.html</span></code>,
<code class="docutils literal notranslate"><span class="pre">Example.cc</span></code> and <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>.</p>
<p>Here is <code class="docutils literal notranslate"><span class="pre">Example.html</span></code>:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;emp_base&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;jquery-1.11.2.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;Example.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The only portions of this file that should be customized for your
project are the title (in the <code class="docutils literal notranslate"><span class="pre">&lt;title&gt;</span></code> tags) and the JavaScript file
(change <code class="docutils literal notranslate"><span class="pre">Example.js</span></code> to the name of the <code class="docutils literal notranslate"><span class="pre">.js</span></code> file that you want to
generate). The div, named <code class="docutils literal notranslate"><span class="pre">&quot;emp_base&quot;</span></code>, is where we will hook Empirical
to this web page. You MAY add more divs to control or customize any
aspects of this file’s CSS, but none of this is required for developing
an interface, and most of it can be controlled via C++.</p>
<p>Here is the <code class="docutils literal notranslate"><span class="pre">Example.cc</span></code> file:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;emp/web/web.hpp&quot;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">UI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">emp</span><span class="o">::</span><span class="nn">web</span><span class="p">;</span>

<span class="n">UI</span><span class="o">::</span><span class="n">Document</span><span class="w"> </span><span class="n">doc</span><span class="p">(</span><span class="s">&quot;emp_base&quot;</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This setup will create a web page the says “Hello World!” in large
letters. Manipulations to doc will allow us to control many portions of
the web page. To break down what’s going on, including <code class="docutils literal notranslate"><span class="pre">web/web.h</span></code>
pulls in Empirical’s web framework. Setting the namespace to <code class="docutils literal notranslate"><span class="pre">UI</span></code>
provides a shorter prefix for accessing widgets. Creating the <code class="docutils literal notranslate"><span class="pre">doc</span></code>
<code class="docutils literal notranslate"><span class="pre">Document</span></code> object attaches to the div by the same <code class="docutils literal notranslate"><span class="pre">&quot;emp_base&quot;</span></code> name in
the HTML file. Note the <code class="docutils literal notranslate"><span class="pre">doc</span></code> is global because we want the web page to
keep functioning after <code class="docutils literal notranslate"><span class="pre">main()</span></code> finishes. In emscripten, <code class="docutils literal notranslate"><span class="pre">main()</span></code> is
like any other function and does not force the termination of the
execution.</p>
<p>Now that we have the two files we need, the only other thing we need to
do is compile. The provided Makefile can be run by typing
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">Example.js</span></code>. This will trigger:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>emcc<span class="w"> </span>-std<span class="o">=</span>c++20<span class="w"> </span>-Wall<span class="w"> </span>-Wno-unused-function<span class="w"> </span>-I../../include/emp/<span class="w"> </span>-Os<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;EXTRA_EXPORTED_RUNTIME_METHODS=[&#39;ccall&#39;, &#39;cwrap&#39;]&quot;</span><span class="w"> </span>-s<span class="w"> </span><span class="nv">TOTAL_MEMORY</span><span class="o">=</span><span class="m">67108864</span><span class="w"> </span>--js-library<span class="w"> </span>../../include/emp/web/library_emp.js<span class="w"> </span>-s<span class="w"> </span><span class="nv">EXPORTED_FUNCTIONS</span><span class="o">=</span><span class="s2">&quot;[&#39;_main&#39;, &#39;_empCppCallback&#39;]&quot;</span><span class="w"> </span>-s<span class="w"> </span><span class="nv">NO_EXIT_RUNTIME</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>Example.cc<span class="w"> </span>-o<span class="w"> </span>Example.js
</pre></div>
</div>
<ul class="simple">
<li><p>emscripten uses the <code class="docutils literal notranslate"><span class="pre">emcc</span></code> compiler (or <code class="docutils literal notranslate"><span class="pre">em++</span></code>, since we are using
C++).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-std=c++20</span></code> : Empirical requires c++20.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wall</span> <span class="pre">-Wno-unused-function</span></code> : turn on all warnings by default
except for unused functions, since not all library functions are
going to be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-I../../include/</span></code> : The compiled file is two directories up in the
Empirical library, so this flag properly includes the source files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Os</span></code> : Optimize for size, though <code class="docutils literal notranslate"><span class="pre">-O3</span></code> may perform better in some
situations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">TOTAL_MEMORY=67108864</span></code> : Make sure we have enough memory; in
this case reserve 64 MB.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--js-library</span> <span class="pre">../../include/emp/web/library_emp.js</span></code> : Load Empirical JS
functions that we might need.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">EXPORTED_FUNCTIONS=&quot;['_main',</span> <span class="pre">'_empCppCallback']&quot;</span></code> : Make sure
we can run the C++ functions <code class="docutils literal notranslate"><span class="pre">main()</span></code> and <code class="docutils literal notranslate"><span class="pre">_empCppCallback()</span></code> from
Javascript, to facilitate two-way communication.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">&quot;EXTRA_EXPORTED_RUNTIME_METHODS=['ccall',</span> <span class="pre">'cwrap']&quot;</span></code> :
expose necessary Emscripten utilities for internal Empirical use</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">NO_EXIT_RUNTIME=1</span></code> : In most cases, we don’t want our program
to stop when <code class="docutils literal notranslate"><span class="pre">main()</span></code> finishes.</p></li>
</ul>
<p>…finally we list the source file we are compiling (<code class="docutils literal notranslate"><span class="pre">Example.cc</span></code>) and
the output file that we want to produce (<code class="docutils literal notranslate"><span class="pre">Example.js</span></code>). The majority of
these flags shouldn’t change from one compilation to the next, other
than changing optimization to debugging options, which we’ll cover in
the debugging guide.</p>
<p>If you want to speed things up further, you may also want to add the
compiler option</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">-DNDEBUG</span></code> : turn off debugging for a faster executable</p>
</div></blockquote>
<p>To test the results, open <code class="docutils literal notranslate"><span class="pre">Example.html</span></code> in your web browser!</p>
</section>
<section id="controlling-a-web-page-the-basics">
<h2>Controlling a Web Page: The Basics<a class="headerlink" href="#controlling-a-web-page-the-basics" title="Link to this heading"></a></h2>
<p>To understand how most of the HTML widgets work we need only change the
main code file; the current HTML file and compiler options can be left
the same.</p>
<p>As indicated by our starting point, text can be streamed into an HTML
document in a similar way to an output stream in the standard library.
For example, we can update our main function to mix text and variables:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;x = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.&lt;br&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In additional to regular variables, <code class="docutils literal notranslate"><span class="pre">emp::Document</span></code> (and other Empirical
web containers) can also take a range of Empirical Widgets.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">Ping</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Ping! &quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;x = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.&lt;br&gt;&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Insert an image (in place)</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">UI</span><span class="o">::</span><span class="n">Image</span><span class="p">(</span><span class="s">&quot;url.goes.here&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;&lt;br&gt;&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Create a button and then insert it.</span>
<span class="w">  </span><span class="n">UI</span><span class="o">::</span><span class="n">Button</span><span class="w"> </span><span class="n">my_button</span><span class="p">(</span><span class="w"> </span><span class="n">Ping</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Click me!&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">my_button</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notice now that you not only have a pretty picture, but you also have a
button that will add new text on to the screen each time it’s clicked.</p>
<p>But what if we want to update existing content? We can do this in two
ways: either by marking a variable (or function) as “Live” or by
simply changing a widget that is already on the screen.</p>
</section>
<section id="live-variables-and-function">
<h2>“Live” Variables and Function<a class="headerlink" href="#live-variables-and-function" title="Link to this heading"></a></h2>
<p>Anything sent to a web page that is inside a <code class="docutils literal notranslate"><span class="pre">UI::Live()</span></code> function will
always have its most current value used whenever that portion of the
page is redrawn. For example, let’s make our button modify the value of
<code class="docutils literal notranslate"><span class="pre">x</span></code> and redraw it.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Original x = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.&lt;br&gt;&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Current x = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">UI</span><span class="o">::</span><span class="n">Live</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.&lt;br&gt;&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Create a button to modify x.</span>
<span class="w">  </span><span class="n">UI</span><span class="o">::</span><span class="n">Button</span><span class="w"> </span><span class="n">my_button</span><span class="p">(</span><span class="w"> </span><span class="p">[](){</span><span class="w"> </span><span class="n">x</span><span class="o">+=</span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="n">Redraw</span><span class="p">();</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s">&quot;Click me!&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">my_button</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notice that we also moved <code class="docutils literal notranslate"><span class="pre">x</span></code> to be a global variable. This is because
if it were local to <code class="docutils literal notranslate"><span class="pre">main()</span></code> it would be freed as soon as main ended.
We’re also using a lambda this time instead of a previously defined
function. Either option is fine.</p>
<p>Try clicking on the button – you’ll see that <code class="docutils literal notranslate"><span class="pre">x</span></code> will be updated, and
then the document is signaled that it needs to redraw, so the change is
reflected on the screen. Note that we didn’t actually need to redraw
the entire document to update <code class="docutils literal notranslate"><span class="pre">x</span></code>, just the <code class="docutils literal notranslate"><span class="pre">Text</span></code> widget it is in;
we’ll talk more about how to do that below.</p>
<p>Of course, we can put a function in the <code class="docutils literal notranslate"><span class="pre">UI::Live()</span></code> and that function
will be called each time the containing Widget is redrawn.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Original x = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.&lt;br&gt;&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Current x = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">UI</span><span class="o">::</span><span class="n">Live</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.&lt;br&gt;&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;x/5 = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">UI</span><span class="o">::</span><span class="n">Live</span><span class="p">(</span><span class="w"> </span><span class="p">[](){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;.&lt;br&gt;&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Create a button to modify x.</span>
<span class="w">  </span><span class="n">UI</span><span class="o">::</span><span class="n">Button</span><span class="w"> </span><span class="n">my_button</span><span class="p">(</span><span class="w"> </span><span class="p">[](){</span><span class="w"> </span><span class="n">x</span><span class="o">+=</span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="n">Redraw</span><span class="p">();</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s">&quot;Click me!&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">  </span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">my_button</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Of course, we need to be able to modify Widgets in addition to
variables; fortunately this is easy as well.</p>
</section>
<section id="finding-and-modifying-existing-widgets">
<h2>Finding and Modifying Existing Widgets<a class="headerlink" href="#finding-and-modifying-existing-widgets" title="Link to this heading"></a></h2>
<p>There are two ways to keep track of Widgets in Empirical. One is to
simply hold on to a variable associated with the Widget, such as
<code class="docutils literal notranslate"><span class="pre">my_button</span></code> in our previous examples. At any point we can still modify
something about <code class="docutils literal notranslate"><span class="pre">my_button</span></code>. For example, if we added a line at the end
of main:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">my_button</span><span class="p">.</span><span class="n">Label</span><span class="p">(</span><span class="s">&quot;PLEASE Click Me!&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>We will see that the button label updates to the new string.</p>
<p>The other option we have to keep track of a widget is to specify its
HTML identifier so that we can look it up again later. For example, if
when we first declared <code class="docutils literal notranslate"><span class="pre">my_button</span></code> we had given it an extra string
argument, that string would be used as its identifier.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">UI</span><span class="o">::</span><span class="n">Button</span><span class="w"> </span><span class="nf">my_button</span><span class="p">(</span><span class="w"> </span><span class="p">[](){</span><span class="w"> </span><span class="n">x</span><span class="o">+=</span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">doc</span><span class="p">.</span><span class="n">Redraw</span><span class="p">();</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s">&quot;Click me!&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;my_button&quot;</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>At any point after we insert the button into a container (such as
<code class="docutils literal notranslate"><span class="pre">doc</span></code>), we are able to request it back from the container again. So, for
example instead of</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">my_button</span><span class="p">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s">&quot;PLEASE Click Me!&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>we could have said</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span><span class="p">.</span><span class="n">Button</span><span class="p">(</span><span class="s">&quot;my_button&quot;</span><span class="p">).</span><span class="n">SetLabel</span><span class="p">(</span><span class="s">&quot;PLEASE Click Me!&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">doc</span></code> will properly look up the correct button for us (or trip an
assert if the required button cannot be found.) In practice, allowing
containers to track Widgets is much easier than juggling links to all of
them yourself.</p>
</section>
<section id="controlling-css">
<h2>Controlling CSS<a class="headerlink" href="#controlling-css" title="Link to this heading"></a></h2>
<p>Web page aesthetics are controlled by adjusting the CSS of the widgets,
and Empirical is no different. You have two options for controlling CSS
– you can do it the traditional way by modifying the HTML file (often
with the help of other packages) or else you can control specific CSS
settings with the <code class="docutils literal notranslate"><span class="pre">.CSS</span></code> member function associated with all Widgets.</p>
<p>For example, if we wanted our button to be green with red text, we could
add to the end of <code class="docutils literal notranslate"><span class="pre">main</span></code> the statement</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">my_button</span><span class="p">.</span><span class="n">SetCSS</span><span class="p">(</span><span class="s">&quot;background-color&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;green&quot;</span><span class="p">).</span><span class="n">SetCSS</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;red&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Note the chaining of modifiers.</p>
<p>Most common settings are directly defined as member functions, so the
above could also be expressed as</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">my_button</span><span class="p">.</span><span class="n">SetBackground</span><span class="p">(</span><span class="s">&quot;green&quot;</span><span class="p">).</span><span class="n">SetColor</span><span class="p">(</span><span class="s">&quot;red&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>which can be cleaner. See the class documentation for a full list of
available functions to modify each Widget type.</p>
</section>
<section id="empirical-tables">
<h2>Empirical Tables<a class="headerlink" href="#empirical-tables" title="Link to this heading"></a></h2>
<p>Tables are one of the features of Empirical that differs most in style
from the underlying HTML it modifies, preferring a more exact form where
the user sets the number of rows and columns to be used.</p>
<p>For example, to build a table with 7 rows and 3 columns, we can declare</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">UI</span><span class="o">::</span><span class="n">Table</span><span class="w"> </span><span class="n">my_table</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;my_table&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>To access a cell from a table, we can simply use the <code class="docutils literal notranslate"><span class="pre">.GetCell(x,y)</span></code>
member function. So if we want to fill the table with data, we might do
something like</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span><span class="w"> </span><span class="n">r</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">c</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">my_table</span><span class="p">.</span><span class="n">GetCell</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">c</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To make the table pretty, we probably want to add some CSS.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">my_table</span><span class="p">.</span><span class="n">SetCSS</span><span class="p">(</span><span class="s">&quot;border-collapse&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;collapse&quot;</span><span class="p">);</span>
<span class="n">my_table</span><span class="p">.</span><span class="n">SetCSS</span><span class="p">(</span><span class="s">&quot;border&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3px solid&quot;</span><span class="p">);</span>
<span class="n">my_table</span><span class="p">.</span><span class="n">CellsCSS</span><span class="p">(</span><span class="s">&quot;border&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1px solid&quot;</span><span class="p">);</span>
<span class="n">my_table</span><span class="p">.</span><span class="n">CellsCSS</span><span class="p">(</span><span class="s">&quot;padding&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3px&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Note that we are able to target the CSS of all <code class="docutils literal notranslate"><span class="pre">TableCells</span></code> at once.</p>
<p>We can target individual cells using <code class="docutils literal notranslate"><span class="pre">GetCell()</span></code>, as well as using
<code class="docutils literal notranslate"><span class="pre">GetRow()</span></code>, <code class="docutils literal notranslate"><span class="pre">GetCol()</span></code>, <code class="docutils literal notranslate"><span class="pre">GetRowGroup()</span></code>, and <code class="docutils literal notranslate"><span class="pre">GetColGroup()</span></code>. Each of
these returns a <code class="docutils literal notranslate"><span class="pre">TableWidget</span></code> with the appropriate component in focus,
so additional modifications are handled correctly.</p>
<p>Finally, of course, make sure to insert the table into the document.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">my_table</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="canvas">
<h2>Canvas<a class="headerlink" href="#canvas" title="Link to this heading"></a></h2>
<p>Canvas widgets in Empirical are a slightly streamlined version of
canvases in HTML. To build one, you simply need to create an
<code class="docutils literal notranslate"><span class="pre">emp::Canvas</span></code> object (with the appropriate size) and place it into the
document. For example</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">UI</span><span class="o">::</span><span class="n">Canvas</span><span class="w"> </span><span class="n">my_canvas</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;my_canvas&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>would create a 300x400 canvas. We can then use member functions to draw
lines, circles, and rectangles on the <code class="docutils literal notranslate"><span class="pre">Canvas</span></code>. For example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">my_canvas</span><span class="p">.</span><span class="n">Circle</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;red&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;black&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>would draw a circle at (100,100) with a radius of 40, a face color of
red, and an outline of black.</p>
<p>Note also that a number of <code class="docutils literal notranslate"><span class="pre">Draw()</span></code> function exist for <code class="docutils literal notranslate"><span class="pre">Canvas</span></code> that
will allow more complex structures to be drawn easily, such as grids
where the colors of each position are specified. Several other Empirical
tools hook into <code class="docutils literal notranslate"><span class="pre">Canvas</span></code>. For example if you are building a world with
<code class="docutils literal notranslate"><span class="pre">emp::Surface</span></code>, that surface can be handed to canvas to have all of the
shapes on it (currently just circles) drawn for you.</p>
<p>Other topics, coming soon!</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TextArea</span></code>s</p></li>
<li><p>The Text Widget extras (specifying, closing, modifying, etc.)</p></li>
<li><p>Listeners and Capturing input events</p></li>
<li><p>Working with keypresses</p></li>
<li><p>Customized Divs</p></li>
<li><p>Uploading files</p></li>
<li><p>Interfacing between HTML and Empirical</p></li>
<li><p>Using JSWrap</p></li>
<li><p>Freezing and Activating Widgets</p></li>
<li><p>Animations</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="2-BaseTools.html" class="btn btn-neutral float-left" title="Base Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="4-UsingProjectTemplate.html" class="btn btn-neutral float-right" title="Using the Project Template" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2023, Charles Ofria.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Base Tools &mdash; Empirical 0.0.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=933cd161"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script defer="defer" src="https://unpkg.com/@popperjs/core@2"></script>
        <script defer="defer" src="https://unpkg.com/tippy.js@6"></script>
        <script defer="defer" src="../_static/tippy/QuickStartGuides/2-BaseTools.434726d7-fe58-4bb9-9f6d-c1d8c0a81a59.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Web Tools" href="3-WebTools.html" />
    <link rel="prev" title="Hello World" href="1-HelloWorld.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Empirical
          </a>
              <div class="version">
                0.0.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../BuiltWithEmpiricalGallery/index.html">Built With Empirical Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Quick Start Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="0-Overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="1-HelloWorld.html">Hello World</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Base Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#base-assert-h">base/assert.h</a></li>
<li class="toctree-l3"><a class="reference internal" href="#base-array-h-and-base-vector-h">base/array.h and base/vector.h</a></li>
<li class="toctree-l3"><a class="reference internal" href="#base-ptr-h">base/Ptr.h</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="3-WebTools.html">Web Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-UsingProjectTemplate.html">Using the Project Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="todos/todo.html">Work In Progress</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Empirical</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../library/base/base.html">General Purpose Debugging Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/bits/bits.html">Bits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/compiler/compiler.html">Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/config/config.html">Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/control/control.html">Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/data/data.html">Data Collection and Recording Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/datastructs/datastructs.html">Data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/debug/debug.html">Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/evolve/evolve.html">Evolution tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/functional/functional.html">Functional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/games/games.html">Games</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/geometry/geometry.html">Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/hardware/hardware.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/in_progress/in_progress.html">In_progress</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/io/io.html">IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/matching/matching.html">Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/math/math.html">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/meta/meta.html">Meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/polyfill/polyfill.html">Polyfill</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/prefab/prefab.html">Prefab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/scholar/scholar.html">Scholar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/testing/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/text/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/tools/tools.html">Other Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library/web/web.html">Web Tools (for use with Emscripten)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bibliography</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to Empirical</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/empirical-development-practices.html">Empirical Development Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/getting-started.html">Getting started with Empirical development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/contribution-guidelines-and-review.html">Coding guidelines and review checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/adding-documentation.html">Empirical Documentation Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/guide-to-testing.html">Guide to Testing in Empirical</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Empirical</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Quick Start Guides</a></li>
      <li class="breadcrumb-item active">Base Tools</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="base-tools">
<h1>Base Tools<a class="headerlink" href="#base-tools" title="Link to this heading"></a></h1>
<p>A handful of tools are available in the include/emp/base/ folder in
Empirical. These mimic basic functionality available in C++ or its
standard library, but provide extra protection against common memory use
errors and additional information to the developer.  These protections
can be turned off by comiling with -DNDEBUG.</p>
<section id="base-assert-h">
<h2>base/assert.h<a class="headerlink" href="#base-assert-h" title="Link to this heading"></a></h2>
<p>This file adds an <code class="docutils literal notranslate"><span class="pre">emp_assert</span></code> macro that can handle all of the same
functionality as the standard library assert, but with additional
features. Specifically, additional arguments may be added that are
printed when the assert is triggered. For example, the line</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">emp_assert</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</pre></div>
</div>
<p>if triggered, would print something to the effect of</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Assert<span class="w"> </span>Error<span class="w"> </span><span class="o">(</span>In<span class="w"> </span>assert.cc<span class="w"> </span>line<span class="w"> </span><span class="m">6</span><span class="o">)</span>:<span class="w"> </span>i<span class="w"> </span>&lt;<span class="w"> </span><span class="m">10</span>
i:<span class="w"> </span><span class="o">[</span><span class="m">1844674</span><span class="o">]</span>
Abort
</pre></div>
</div>
<p>Indicating that not only was <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&gt;=</span> <span class="pre">10</span></code>, but its current value is
1844674.</p>
<p>If compiled as part of a web app (with emscripten) <code class="docutils literal notranslate"><span class="pre">emp_assert</span></code>: will
automatically use the JavaScript Alert function to indicate any assert
failures. Asserts are all disabled (fully removed from compiled code) if
compiled using the <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> option (for most compilers, this
deactivation is accomplished by using the <code class="docutils literal notranslate"><span class="pre">-DNDEBUG</span></code> flag at compile
time.)</p>
</section>
<section id="base-array-h-and-base-vector-h">
<h2>base/array.h and base/vector.h<a class="headerlink" href="#base-array-h-and-base-vector-h" title="Link to this heading"></a></h2>
<p>These files setup the <code class="docutils literal notranslate"><span class="pre">emp::array&lt;...&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">emp::vector&lt;...&gt;</span></code> template
objects, which behave almost identically to <code class="docutils literal notranslate"><span class="pre">std::array&lt;...&gt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">std::vector&lt;...&gt;</span></code>, respectively. The one difference is that they do
bounds checking when they are indexed into or specific size matters. As
with asserts, these additional bounds checks are removed when compiled
with the <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> option.</p>
</section>
<section id="base-ptr-h">
<h2>base/Ptr.h<a class="headerlink" href="#base-ptr-h" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">emp::Ptr&lt;...&gt;</span></code> template provides an alternate method of building
pointers, but with the ability to turn on additional debugging
facilities; unlike assert, array, and vector, no debugging is performed
by default due to substantial run-time costs. For example declaring a
variable as <code class="docutils literal notranslate"><span class="pre">emp::Ptr&lt;int&gt;</span></code> is the same as declaring it <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span></code>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">EMP_TRACK_MEM</span></code> option is set (<code class="docutils literal notranslate"><span class="pre">-DEMP_TRACK_MEM</span></code> compiler flag)
then all pointer usage is tracked and many simple memory errors will be
identified during execution, such as using or deleting an unallocated
pointer.</p>
<p>Most usage of the <code class="docutils literal notranslate"><span class="pre">Ptr</span></code> class is identical to raw pointers, including
all operator. Differences include:</p>
<ul class="simple">
<li><p>Rather than using <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">TYPE</span></code> to allocate a new pointer, use
<code class="docutils literal notranslate"><span class="pre">emp::NewPtr&lt;TYPE&gt;</span></code></p></li>
<li><p>If allocating an array, use <code class="docutils literal notranslate"><span class="pre">emp::NewArrayPtr&lt;TYPE&gt;(SIZE)</span></code></p></li>
<li><p>To delete use the <code class="docutils literal notranslate"><span class="pre">.Delete()</span></code> or <code class="docutils literal notranslate"><span class="pre">.DeleteArray()</span></code> member function
(not <code class="docutils literal notranslate"><span class="pre">delete</span></code> or <code class="docutils literal notranslate"><span class="pre">delete[]</span></code>).</p></li>
<li><p>To cast one <code class="docutils literal notranslate"><span class="pre">Ptr</span></code> type to another, use the <code class="docutils literal notranslate"><span class="pre">.Cast&lt;TYPE&gt;</span></code> member
function.</p></li>
<li><p>To dynamic cast (double-checking types and returning <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> on
failure), use <code class="docutils literal notranslate"><span class="pre">.DynamicCast&lt;TYPE&gt;</span></code></p></li>
</ul>
<p>To convert a <code class="docutils literal notranslate"><span class="pre">Ptr</span></code>-allocated pointer to the raw form, use the <code class="docutils literal notranslate"><span class="pre">Raw()</span></code>
member function. Make sure that any pointer allocated as a <code class="docutils literal notranslate"><span class="pre">Ptr</span></code> type is
also freed as a <code class="docutils literal notranslate"><span class="pre">Ptr</span></code> type.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="1-HelloWorld.html" class="btn btn-neutral float-left" title="Hello World" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="3-WebTools.html" class="btn btn-neutral float-right" title="Web Tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2023, Charles Ofria.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>